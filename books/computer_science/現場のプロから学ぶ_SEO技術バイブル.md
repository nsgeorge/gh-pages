---
layout: default
description: 現場のプロから学ぶ　SEO技術バイブル
---

# [現場のプロから学ぶ　SEO技術バイブル](https://www.amazon.co.jp/gp/product/B07FMR3GD6/ref=oh_aui_d_detailpage_o03_?ie=UTF8&psc=1)

---

# SEOの基礎

---

## オンラインでの集客手法

以下のトリプルメディアに分類

 - Owned Media：自社で保有するサイト
 - Paid Media：配信面を購入して出向する他社メディア。リスティング広告、アフィリエイト広告、DSP広告
 - Earned Media：SNSで消費者の評判を得るメディア。Facebook, Twitter, Instaなど

## SEOとは

**検索順位を向上させることで、Owned Mediaからの流入増を目指す施策のこと**

SEOの優位性として、

 - 流入ユーザーの質が高い（自ら検索している＝能動的＝プル型のため）
 - **SEOを施したWebサイトが資産になる**（これ重要）

が挙げられるとのこと。なるほど、SEO施策を施したサイトが資産になるという考え方はなかった。
確かに、リスティング広告はSEO施策のコストをすっ飛ばす代わりに、対価を払って優位な位置に自らのサイトへの誘導動線を表示させていると言えるなぁ。

## SEOとは？

検索サイトはGoogle+Yahoo! JAPANで９割以上。で、ヤフーの裏側のエンジンはGoogleなので、
９割以上の検索がGoogleのエンジンで行われているという現実。

 - [実はYahooとGoogleの検索エンジンが同じということ知っていましたか！？ - ウェブ企画ラボ](https://webkikaku.co.jp/blog/seo/yahoo-google-search/)

つまり、Googleの検索エンジンに最適化する＝ほぼ世の中の検索エンジンへのSEO対策という話になる。
ので、Googleが公表してるルールにのっとってWebサイト作ろうぜという話

## Googleの評価要素

きた。ここめっちゃ知りたかった。
やっぱり一般には公表されてないらしい。各社ナレッジとかためてそう。
ただ、Googleが過去の公表した内容から推測されるいくつかの要素がまとめられていた。
ざっくり「内部要素」と「外部要素」があるらすぃ

#### 内部要素

 - `<title>`や`<meta description>`の記述が適切か
 - XMLサイトマップを使っているか
 - 構造化マークアップに対応しているか
 - 表示速度は十分か
 - モバイルフレンドリーか
 - コンテンツがユーザーニーズを満たしているか

#### 外部要素

主に他サイトからの引用やリンクがこれに相当するらしい。有名やね。

> Google「Web上の民主主義は機能する」

ただし、意図的に生成した外部リンクは逆にペナルティなどとなるリスクがあるため実施しないようが良い。
あくまで自然にリンクがはられるような有用なコンテンツを作る事が重要（そりゃそうか）


## Search Console

 - [Google Search Console へようこそ](https://search.google.com/search-console/welcome)

ここで、SEO施策が正しく機能しているか、あるいはサイトのパフォーマンスなどをチェックできる。
かなり重要なツール

## HTMLの記述方法

#### title要素

 - ページの内容を端的に表す
   - 検索結果に表示される部分なのでめちゃ重要
 - 31文字以内に収める（検索結果に表示できる文字数がこれくらいなため）
 - Webサイト内すべてのページでユニークなテキストとなるようにする

#### meta要素

 - 文字コードを指定する
 - http-equiv="X-UA-Compatible"を指定する
   - これいらんやろって言ってるひともいるみたい
     - [【HTML】metaタグ：『X-UA-Compatible』はよっぽどでなければ設定する必要はないかもしれません。](https://www.creativevillage.ne.jp/2819)
   - これは、「Internet Explorerでどのバージョンのモードでレンダリングを行うか(ドキュメントモード)を指定することができるプラグマ」らしい
     - [X-UA-Compatibleについて調べてみた - だれも聞いていないと思って歌え](http://38fanjia.hatenablog.com/entry/2016/05/28/164400)
 - descriptionを記載する
   - これ検索結果のタイトルの下に表示される部分なのでちゃんと書く
   - ただ、内容によってWebページの記事内容が表示される場合もあり
     - 適切なほうをGoogle検索エンジンが判断して表示してるらしい
   - キーワードを含める（検索結果で太字で表示される場合があるので有効）
   - 100文字以内にする
   - ページごとにユニークな内容にする（これむず）
 - keywordsを記載する
   - カンマ区切りで書く
   - 決まりはないが目安は3-6個
   - 関係ないキーワードを設定すると悪用と判断されて評価がさかるかも。注意
   - 検索順位のランキングへは影響ないらしい
 - robotsを記載する
   - **後述**

#### h要素による見出し

以下の注意点を守る

 - 階層構造を守る
 - h要素を多用しない
   - これGoogleも多用すんなって明言してるらしい
 - `<h1>`の見出しテキストはページごとにユニークにする
   - 1ページに1つだけ
 - スタイルを整えるためだけに使わない

#### a要素によるアンカーテキスト

 - ルートパス：ドメインの最上位を基準にするリンク

がオススメらしい。アンカーテキストは`リンクとなる文言`をちゃんと考えることが重要。そりゃそうか。

 - アンカーテキストが検索順位に影響している事例：「出口」でぐぐる

#### img要素で伝える画像情報

 - alt属性：万が一画像が表示されなかった場合の代替手段として表示させる文言
   - `<img src="http://dog.com/dog1.jpeg" alt="かわいい柴犬の画像"/>`的な感じ
 - title, h, a要素の場合も画像を使うときはalt属性を設定すること
 - あとGoogleBotは画像周辺の文脈も解析してくれるっぽいのでその画像に関連する文章の近くに置くこと
 - あと重要なポイントとして、画像の「ファイル名」もその意味を理解するために使われるらしい
   - 「pic01.jpeg」よりも「`pretty_dog01.jpeg`」が良い

---

# マイナス評価を回避するSEOの話

---

マイナス評価を受けた場合、いくらプラスの施策をうっても効果を発揮できないため、
まずは「マイナス」を「ゼロ」に持っていくところに注力することが重要。

## 1URL1コンテンツの原則

これこの本で何度も出てくる重要な概念。覚えておきたい。

Googleでは、検索結果に可能な限り多様なドメインの検索結果を表示する仕組みが採用されてるらしい。

つまり、同一キーワードに対して同一ドメインで複数ページSEO施策をうっても、
検索結果にはそのうちのどれか１ページしか表示されない可能性が高い。（つまり重複しているページへのSEO施策は無駄になる）


## URLのユニーク化

1URL1コンテンツを守るためにはどうすればよいか？これが守れてないケースの大きなパターンが以下

 - 同一URLに異なるコンテンツ
 - 異なるURLに同一コンテンツ
 - 異なるURLに同一title/description
 - 異なるURLに１コンテンツが分割されている（ページネーション）
 
え、ページネーションもだめなん！？と思った。
なるほど、これはページネーションがだめというよりそのURI設計に気をつけろという意味っぽい。


## 同一URLに異なるコンテンツの解消方法

よくあるのが、

 - http://shop.com/search
 
みたいなURLで検索ページがあって、querystringで検索結果を出し分けてるパターン。
実はこれはOKらしい。問題なのは、クエリがPOSTになってて、
条件を指定して検索してもURLは変わらない、というやつ。これはNG。

可能であれば、「静的URL」が好ましいらしい。

`http://shop.com/search?gender=mens&category=tops&product=t-shirt`

これ（`動的URL`）より

`http://shop.com/mens/tops/t-shirt`

こっち（`静的URL`）が良いという意味。

## 異なるURLに同一コンテンツの解消方法

以下のケースがこれに該当するっぽい

 - http／https
 - wwwの有無
 - index.php／index.html／なし
 - URL末端の「/」の有無
 - 変なquerystringがついているなど
 
これ、何が問題なのか。1URL1コンテンツの原則を満たしてないのもそうやけど、以下の問題が大きいみたい

 - SEO評価が分散してしまう
   - これは、外部リンクを貼ってくれる人が色んなバリエーションのURLでリンクを貼ってしまったりすることもあるため
 - 同じ内容のページを複数回クロールしてしまうためクローラビリティが低くなる
 - クロールバジェットももったいない

で、どうすればよいか

 - http／https：httpsに寄せる 
 - wwwの有無：どっちでもOK
 - index.php／index.html／なし：「/」で終わらせる
 - URL末端の「/」の有無：「/」で終わらせる
 - 変なquerystringがついているなど：パラメタつけない

って感じがおすすめらしい。

また、正規ページを定義してそっちだけクロールしてね！みたいな設定をする必要がある。以下で解説。

#### 異なるURLのページを正規ページへ寄せる方法

以下の２つの方法がある

 - 301リダイレクト
 - canonical設定
 
Googleは「301リダイレクト」を推奨している。

このため、ユーザーに正規URLに遷移させたくない場合にのみcanonical設定を利用するようにする。

ケース別に整理し直すと

 - http／https：301リダイレクト
 - wwwの有無：301リダイレクト
 - index.php／index.html／なし：301リダイレクト
 - URL末端の「/」の有無：301リダイレクト
 - 変なquerystringがついているなど：canonical（※1）
 - 別URL（本当は検索結果上位に表示されているURLが正）：301リダイレクト

という感じ。

※1：アクセス解析等で利用するパラメタがある場合、301リダイレクトを利用すると情報が欠落してしまうため

#### 301リダイレクト

リダイレクトには、以下の3つのやり方があるが

 - サーバー側で設定
 - jsで設定
 - htmlで設定（`meta refresh設定 -> 本に載ってなかったのでggrこと`）
 
301リダイレクトが可能なのは`サーバー側で設定`のみ（Google推奨）。
 
それ以外の方法はリダイレクトはできるもののただの強制的なページ遷移なだけでhttpステータスコードとして301を返したりはできない。
 
サーバーの設定方法は、Webアプリケーションのインフラに依存するので適時調べて設定する。

**jsで設定**

どうしてもサーバー側で制御できない場合のみ、jsとhtmlで制御する方法を採用するようにする。

jsで設定する場合は、リダイレクト元となるページのhtmlに以下のようにスクリプトを埋め込む

```html
<head>
...
  <!-- https://xxxx.comにリダイレクトする場合 -->
  <script type="text/javascript">
    location.href="https://xxxx.com";
  </script>
...
</head>
```

#### canonical設定

これまたやり方が2つある

 - htmlで設定
   - html head内に`<link rel="canonical" href="https://xxx.com">`
 - httpヘッダーで設定
   - http ヘッダーで`Link: <https://xxx.com/yyy.pdf>; rel="canonical"`

どう使い分けるかというと、例えばファイルの表示などでhtmlで指定できない場合にhttpヘッダーの方法を使うらしい。なるほど。

## ページネーション対応

1URL1コンテンツの原則が守られていないパターンに、このページネーションが入っているページも該当するらしい。なぬ

4つのポイントがあるみたい

 - URLの管理方法
 - rel="prev" /rel="next"の設置
 - title/descriptionのユニーク化（これむずくない？）
 - 旧Search Consoleでのパラメタ設定

#### URLの管理方法

ページネーションしているページについて、全て同じURLだけどユーザーに見えないパラメタ（Cookieとか）を使ってページングはNGみたい。

基本的には、以下のどちらかの方法にしないといけない

 - 同一URL階層にパラメタを付与した異なるURL
   - 例
     - http://xxx.com/zzz?page=1
     - http://xxx.com/zzz?page=2
     - http://xxx.com/zzz?page=3
 - 異なるURL階層で管理
   - 例
     - http://xxx.com/zzz/1/
     - http://xxx.com/zzz/2/
     - http://xxx.com/zzz/3/
 
 まぁ両方よく見かけるやつ。
 
#### rel="prev" /rel="next"の設置

これ知らなかった。ページの前後関係をhtmlで表現できるらしい。

```html
<head>
...
  <!-- prev: 最初のページ以外に記載 -->
  <link rel="prev" href="前ページURL">
  <!-- next: 最後のページ以外に記載 -->
  <link rel="next" href="次ページURL">
...
</head>
```
    
#### title/descriptionのユニーク化

ほんとにバラバラにするのはむずいので、

 - title: `XXX一覧 Nページ目`
 - description: `XXX一覧のNページ目の紹介ページです。`

という感じでページを含めてあげるのが良いみたい。

ちなみに検索エンジンは1ページ目を検索結果に表示するようなロジックが入っているらしい（2018/08現在）

#### 旧Search Consoleでのパラメタ設定

パラメタでのページネーションの制御の場合は、旧Search Consoleでパラメタ名を登録してあげると良いみたい。

`http://xxx.com/zzz?page=1`の場合は、`page`をパラメタとして登録してあげるということ。

---

# エラーに対する対応の話

---

そもそもエラーを出さないようなサービス運営が重要。

仮にエラーとなってしまう場合でも、ユーザーフレンドリーなページを用意することでGoogleからの評価を落とすことを回避できる。

## エラー対応

エラーは、大きく内部エラーと外部エラーがある

 - 内部エラー：自サイトのエラー
   - 対策：エラー自体を解消する
 - 外部エラー：外部リンクのエラー
   - 対策：リンク切れ等はこちらでは制御できないため、リンクの変更や削除を行う

ちなみに、ユーザーやGooglebotが回遊できないページは対象外になる。

たとえば、サービスの管理者用ページなど。

#### HTTPステータスコード

前提知識としてHTTPステータスコードの概要をまとめる

 - 2xx: サクセス
 - 3xx: リダイレクション
 - 4xx: クライアントエラー
 - 5xx: サーバーエラー
 
#### エラーの探し方

新Search Consoleでエラーを探す機能があるらしい。便利。

#### 404ページをユーザーフレンドリーにする

デフォルトの404ページはユーザーにとって望ましくない事がほとんど。

ユーザーフレンドリーな404ページにするため、以下の項目について検討する。

 - 探しているページがなかったことを伝えられているか？
 - サイトのその他の部分と同じデザインとなっているか？（ナビゲーションなど）
 - 最も人気の記事などへのリンクなど追加できないか？
 - これらの存在しないページがリクエストされた場合にhttpステータス:404を返せているか？
   - これは、Googleの検索結果として意図せずindexingされてしまうことを防ぐため

## スパム対応

スパムとは、Googleのアルゴリズムのすきをつき、ユーザーには不利益を与えるが検索エンジンには高評価を与えられる行為を行うこと。

例えば、以下のようなもの。

 - 価値の低いコンテンツの量産（あるいは自動生成）
   - コピーコンテンツ、ミラーサイト
   - 自動生成コンテンツ
   - キーワードの詰め込み
   - 広告のみで構成されたコンテンツ
 - 質の低い被リンクの量産（あるいは自動生成）
   - 低価値なコンテンツからのリンク
   - 無関係なコンテンツからのリンク
   - 購入リンク（金銭によるリンクの購入）
 - クローラーへの偽装行為
   - キーワードの詰め込み
   - 隠しテキスト、隠しリンク
   - クローキング（ユーザーとGooglebotに異なるページを見せる行為）

自分が意図していなくても、結果的このような状態になってしまっている場合もありうる。

こういったことがないように、定期的なチェックが必要。

---

# 分かりやすいサイトの構成の話

---

## MECEなカテゴリ設計

サイトの構成は、カテゴリごとに階層を決めるのが良い。

 - ファッション
   - アウター
   - パンツ
   - トップス
     - Tシャツ
     - シャツ
     - ニット

みたいな感じ。

所謂MECEなカテゴリ設計が必要。

> MECEって？ロジカルシンキングの基本的考え方を理解して思考の抜け漏れを防ごう｜ferret ［フェレット］  
> https://ferret-plus.com/4387


## ユーザーの目的にあったカテゴリを設計する

3つのツリーで考える方法が紹介されてた。

 - WAHTツリー
 - WHYツリー
 - HOWツリー
 
#### WHATツリー

カテゴリを軸に分類する方法

 - ファッション
   - アウター
   - パンツ
   - トップス
     - Tシャツ
     - シャツ
     - ニット

#### WHYツリー

頂点に解決したい課題を配置して原因をMECEに分類していく方法

 - コーデが決まらない
   - 自分に合う服が見つからない？
   - 性格の問題？
   - 手持ちの洋服が少ない？
     - お金がない？
     - 買いに行く時間がない？

#### HOWツリー

目標や目的を頂点に配置し手段やプロセスをMECEに分類していく方法

 - 配達してほしい
   - 時間指定したい
   - 配達方法を指定したい
   - 梱包方法を提案したい
     - ギフトラッピング
     - 簡易包装

## URLの命名規則

ユーザーがURLを見ただけでどういうページがそのコンテンツ内容が容易に想起できることが重要みたい。

で、ここでユーザーとURLがどういう場所で接点を持つかについて述べられていた。

 - 検索結果ページ
 - SNSでのシェア
 - アドレスバー
 
大きくありそう。加えて、Webページ上のリンクとかもあるかなと思った。

#### クローリング、検索結果への影響

実は、現在のアルゴリズムだとURLの規則によって検索結果が上位に来たり（過去にはあったらしい）、クローリング効率がUPしたりすることはないみたい。

ただ、ユーザーや検索エンジンに有益なことは間違いないので抑えておいたほうが良いとのこと。


#### 分かりやすいURLとは

ここは結構具体的な話が出てて参考になった。URLの命名規則について具体例を使って説明されていた。

 - id等の識別子は使わない
   - NG: http://xxx.com/15/24/
   - OK: http://xxx.com/tops/tshirt/
 - できるだけ短くする
   - NG: http://xxx.com/clothes-tops/t_shaped_shirt/
   - OK: http://xxx.com/tops/tshirt/
 - 長くなる場合は`-`で適切に区切る
   - NG: http://xxx.com/tops/redspringcoat/
   - OK: http://xxx.com/tops/red-spring-coat/

区切り文字は、`-`を使うべきとのこと。Googleもハイフンで文字を区切ることを推奨しているみたい。

あと、文字はすべて小文字で統一したほうが良い。大文字と小文字が混ざるとURLの入力ミスなどに繋がるため。

#### URLの長さ

原則短いほうが良いみたい。理由は以下。

 - やたら長いURLは見栄えが良くない（不安を煽る）
 - URLには2048文字の上限が設けられているため

## 辿りやすいサイト内部リンク

3つポイントがあるらしい。

 - すべてのページを双方向のリンクで繋げる
 - 関連するページ（カテゴリ）にリンクをはる
 - 常にトップページ、最上位カテゴリへのリンクを貼る（よく見かけるやつ）

